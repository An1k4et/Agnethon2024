<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommended Locations</title>
    <link rel="stylesheet" href="/static/css/recommendations.css">
</head>

<body>

    <div class="container">
        <button id="home-button">Home</button>
        <h1 class="header">Recommended Locations</h1>

        <div id="recommendations">
            {% for recommendation in recommendations %}
            <div class="recommendation">
                <div class="location">{{ recommendation.location }}</div>
                <div class="type"><span style="font-size: 18px; font-weight: 200;">Trip Type:</span>
                    {{recommendation.type}}</div>
                <div class="popularity">Popularity: {{ recommendation.popularity }}</div>
                <div class="review">Review: {{ recommendation.review }}</div>
                <div class="budget">Budget: ₹{{ recommendation.budget }}</div>
            </div>
            {% endfor %}
        </div>

        <p class="total-budget">Total budget allocated for this trip: ₹{{ remaining_budget }}</p>
    </div>

    <script>
        function createGoogleMapLink(location) {
            if (!location) return ''; // Return empty string if location is undefined or empty
            return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;
        }

        window.onload = function () {
            const recommendations = document.querySelectorAll('.recommendation');

            recommendations.forEach(recommendation => {
                const location = recommendation.querySelector('.location').textContent.trim().split(' (')[0];
                const link = createGoogleMapLink(location);

                if (!link) return; // Skip if link is empty

                const linkElement = document.createElement('a');
                linkElement.href = link;
                linkElement.textContent = 'View on Google Maps';
                linkElement.className = 'recommendation-link';
                linkElement.target = '_blank';
                linkElement.rel = 'noopener noreferrer';

                recommendation.appendChild(linkElement);
            });
        };

        // Get the home button element
        var homeButton = document.getElementById("home-button");

        // Add a click event listener to the home button
        homeButton.addEventListener("click", function () {
            // Redirect to the homepage
            window.location.href = "/";
        });
    </script>
</body>

</html>